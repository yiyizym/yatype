{"version":3,"sources":["webpack:///webpack/bootstrap 6901d2a5fe10696bea12","webpack:///./src/example/index.js","webpack:///./src/index.js"],"names":["YaType","require","option","strings","content","effect","defaultOpt","loop","charTime","moveBackTime","deleteBackTime","jumpTime","sentencePauseTime","el","document","querySelector","opt","Object","assign","JSON","parse","stringify","currentCentenceIndex","setCursor","walk","currentCursorPosition","innerHTML","cursorStyle","generateStyle","style","createElement","css","join","setAttribute","type","styleSheet","cssText","appendChild","createTextNode","head","self","length","setTimeout","bind","typing","moveBack","arr","prevSentence","split","splice","getLastSameCharIndex","deleteTyping","deleteBack","sentenceToDelete","slice","prevContent","currContent","currSentence","lastSameCharIndex","splitSentence","bPart","mPart","aPart","chars","curStr","index","prev","current","console","error","inverseIndex","lastIndexOf","moveCursor","substring","module","exports"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6901d2a5fe10696bea12","const YaType = require('../index.js');\n\nlet option = {\n    strings: [\n        {content: '这是一款定投工具'},\n        {content: '这是一款 ETF 基金定投工具'},\n        {content: '这是一款不太专业的 ETF 基金定投工具'}\n    ],\n    effect: 'jumpBack' //moveBack|deleteBack|jumpBack\n}\n\nnew YaType('#element', option);\n\n\n// WEBPACK FOOTER //\n// ./src/example/index.js","const defaultOpt = {\n    loop: true,\n    charTime: 600,\n    moveBackTime: 300,\n    deleteBackTime: 300,\n    jumpTime: 300,\n    sentencePauseTime: 1000\n}\n\nclass YaType {\n    constructor(el, option){\n        this.el = document.querySelector(el);\n        this.opt = Object.assign({}, defaultOpt, JSON.parse(JSON.stringify(option)));\n        this.currentCentenceIndex = 0;        \n        this.setCursor();\n        this.walk();\n    }\n\n    setCursor(){\n        this.currentCursorPosition = 0;\n        this.el.innerHTML = '<i class=\"yatype__cursor\">|</i>';\n        this.cursorStyle = document.querySelector('style[name=\"yatype\"]') || generateStyle();\n\n        function generateStyle(){\n            let style = document.createElement('style'),\n                css = [\n                    '.yatype__cursor {',\n                        'color: black;',\n                        'font-weight: bolder;',\n                        'font-style: normal;',\n                        'animation: 1s flashing step-end infinite;',\n                        '}',\n                    '@keyframes flashing {',\n                        '0%, 100% {',\n                            'color: black;',\n                        '}',\n                        '50% {',\n                            'color: transparent',\n                        '}',\n                    '}'].join('\\n');\n                \n            style.setAttribute('name', 'yatype');\n            style.type = 'text/css';\n            if (style.styleSheet){\n                style.styleSheet.cssText = css;\n            } else {\n                style.appendChild(document.createTextNode(css));\n            }\n            document.head.appendChild(style);\n        }\n    }\n\n    walk(){\n        var self = this,\n            strings = self.opt.strings;\n        if(self.currentCentenceIndex == strings.length){\n            if(self.opt.loop){\n                self.currentCentenceIndex = 0;\n                self.setCursor();\n            }else{\n                return;\n            }\n        }\n        setTimeout(self[self.opt.effect + 'Mode'].bind(self), self.opt.sentencePauseTime);\n    }\n\n    moveBackMode(){\n        var self = this;\n        if(this.currentCentenceIndex == 0){\n            self.typing();\n        } else {\n            moveBack();\n        }\n\n        function moveBack(){\n            var arr = self.prevSentence().split('');\n            arr.splice(self.currentCursorPosition, 0, '<i class=\"yatype__cursor\">|</i>');\n            self.el.innerHTML = arr.join('');\n            if(self.currentCursorPosition != self.getLastSameCharIndex()){\n                setTimeout(function(){\n                    self.currentCursorPosition -= 1;\n                    moveBack();\n                }, self.opt.moveBackTime);\n            } else {\n                self.typing();\n            }\n\n        }\n    }\n\n    deleteBackMode(){\n        var self = this;\n        if(this.currentCentenceIndex == 0){\n            self.deleteTyping();\n        } else {\n            var prevSentence = self.prevSentence();\n            deleteBack(prevSentence);\n        }\n\n        function deleteBack(sentenceToDelete){\n            self.el.innerHTML = sentenceToDelete + '<i class=\"yatype__cursor\">|</i>';\n            if(self.currentCursorPosition != self.getLastSameCharIndex()){\n                setTimeout(function(){\n                    self.currentCursorPosition -= 1\n                    deleteBack(sentenceToDelete.slice(0,sentenceToDelete.length - 1));\n                }, self.opt.deleteBackTime);\n            } else {\n                self.deleteTyping();\n            }\n\n        }\n    }\n\n    jumpBackMode(){\n        if(this.currentCentenceIndex != 0){\n            var arr = this.prevSentence().split('');\n            arr.splice(this.getLastSameCharIndex(), 0, '<i class=\"yatype__cursor\">|</i>');\n            this.el.innerHTML = arr.join('');\n        }\n        this.typing();\n    }\n\n    getLastSameCharIndex(){\n        var self = this;\n        var prevContent = self.prevSentence();\n        var currContent = self.currSentence();\n        var lastSameCharIndex = 0;\n        while(\n                prevContent[lastSameCharIndex] &&\n                currContent[lastSameCharIndex] &&\n                prevContent[lastSameCharIndex] == currContent[lastSameCharIndex]\n            ){\n            lastSameCharIndex ++;\n        }\n        return lastSameCharIndex;\n    }\n\n    prevSentence(){\n        if(this.currentCentenceIndex){\n            return this.opt.strings[this.currentCentenceIndex - 1]['content'];\n        } else {\n            return '';\n        }\n    }\n\n    currSentence(){\n        return this.opt.strings[this.currentCentenceIndex]['content'];\n    }\n\n    typing(){\n        let index = 0,\n            self = this,\n            prevContent = this.prevSentence(),\n            currContent = this.currSentence(),\n            {bPart, mPart, aPart} = splitSentence(prevContent, currContent),\n            chars = mPart.split(''),\n            curStr = '';\n\n        self.type(index, bPart, mPart, aPart);\n\n        function splitSentence(prev, current){\n            if(!prev){\n                return {bPart: '', mPart: current, aPart: ''};\n            }\n            if(prev == current){\n                console.error('two sentence is the same');\n                return {bPart: current, mPart: '', aPart: ''};\n            }\n            let index = self.getLastSameCharIndex();\n            let bPart = prev.slice(0, index);\n            let aPart = prev.slice(index, prev.length);\n            let inverseIndex = current.lastIndexOf(aPart);\n            let mPart = current.slice(index, inverseIndex);\n            \n            return {bPart,mPart,aPart}\n        }\n\n    }\n\n    deleteTyping(){\n        var self = this,\n            index = 0, \n            currContent = this.currSentence(),\n            chars = currContent.slice(self.getLastSameCharIndex()),\n            curStr = currContent.slice(0, self.getLastSameCharIndex());\n\n        self.type(index, curStr, chars, '');\n    }\n\n    type(index, bPart, mPart, aPart){\n        let self = this;\n        if(index > mPart.length){\n            this.currentCentenceIndex += 1;\n            this.walk();\n            return;\n        }\n        this.el.innerHTML = this.moveCursor(bPart,mPart.substring(0, index++), aPart);\n        setTimeout(function(){\n            self.type(index, bPart,mPart, aPart);\n        }, this.opt.charTime);\n    }\n\n\n    moveCursor(bPart,curStr, aPart){\n        this.currentCursorPosition = bPart.length + curStr.length;\n        return bPart + curStr + '<i class=\"yatype__cursor\">|</i>' + aPart;\n    }\n\n};\nmodule.exports = YaType\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}